<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks">
    
    <Style x:Key="StyleButtonCollapse" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Width" Value="28"/>
        <Setter Property="Height" Value="28"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border" 
                        Background="{TemplateBinding Background}" 
                        CornerRadius="6" 
                        SnapsToDevicePixels="True">
                        <ContentPresenter HorizontalAlignment="Center" 
                                      VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="Background" Value="#15000000"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="border" Property="Background" Value="#25000000"/>
                            <Setter Property="RenderTransform">
                                <Setter.Value>
                                    <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.3"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <DataTemplate x:Key="ToastTemplate">
        <Border x:Name="ToastBorder" Margin="0,5,10,5" CornerRadius="12" 
            Width="350" Padding="15,10" Background="White" BorderThickness="4,0.8,0.8,0.8">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" Opacity="0.1" ShadowDepth="2"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <iconPacks:PackIconMaterial x:Name="TypeIcon" Width="20" Height="20" VerticalAlignment="Center" Margin="0,0,12,0"/>

                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock Text="{Binding Title}" FontWeight="Bold" FontSize="14" Foreground="#333"/>
                    <TextBlock Text="{Binding Message}" FontSize="12" Foreground="#666" TextWrapping="Wrap"/>
                </StackPanel>

                <Button Grid.Column="2" 
                        Command="{Binding DismissCommand}"
                        VerticalAlignment="Top"
                        Cursor="Hand"
                        Style="{StaticResource StyleButtonCollapse}" 
                        Background="Transparent" BorderThickness="0">
                    <iconPacks:PackIconMaterial Kind="Close" Width="12" Height="12" Foreground="#999"/>
                </Button>
            </Grid>
        </Border>

        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding Type}" Value="Success">
                <Setter TargetName="ToastBorder" Property="BorderBrush" Value="#4CAF50"/>
                <Setter TargetName="TypeIcon" Property="Kind" Value="CheckCircleOutline"/>
                <Setter TargetName="TypeIcon" Property="Foreground" Value="#4CAF50"/>
                <Setter TargetName="ToastBorder" Property="Background" Value="#E8F5E9"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Type}" Value="Error">
                <Setter TargetName="ToastBorder" Property="BorderBrush" Value="#F44336"/>
                <Setter TargetName="TypeIcon" Property="Kind" Value="AlertCircleOutline"/>
                <Setter TargetName="TypeIcon" Property="Foreground" Value="#F44336"/>
                <Setter TargetName="ToastBorder" Property="Background" Value="White"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Type}" Value="Warning">
                <Setter TargetName="ToastBorder" Property="BorderBrush" Value="#FFF4B936"/>
                <Setter TargetName="TypeIcon" Property="Kind" Value="AlertRhombus"/>
                <Setter TargetName="TypeIcon" Property="Foreground" Value="#FFF4B936"/>
                <Setter TargetName="ToastBorder" Property="Background" Value="White"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Type}" Value="Information">
                <Setter TargetName="ToastBorder" Property="BorderBrush" Value="#FF3699F4"/>
                <Setter TargetName="TypeIcon" Property="Kind" Value="InformationVariantCircle"/>
                <Setter TargetName="TypeIcon" Property="Foreground" Value="#FF3699F4"/>
                <Setter TargetName="ToastBorder" Property="Background" Value="White"/>
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</ResourceDictionary>